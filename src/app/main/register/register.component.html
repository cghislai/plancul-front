<div class="register ui-widget">

  <h1 i18n="register page title">
    Welcome !
  </h1>

  <header>
    <span i18n="register page header no-existing-account"
          *ngIf="!(hasExistingAccount | async)">
      Please fill the form below to create an account
    </span>
    <span i18n="register page header existing-account"
          *ngIf="hasExistingAccount | async">
      Please complete the information to activate your account
    </span>
  </header>

  <form class="register-form pc-form" #registerForm="ngForm" (ngSubmit)="onRegister()"
        validateFieldEquality="password,passwordCheck">

    <section *ngIf="!(hasExistingAccount | async)">

      <div class="row">
        <input pInputText
               [(ngModel)]="registration.email"
               title="Email"
               placeholder="Email"
               i18n-title="email field title@@email-field-title"
               i18n-placeholder="email field title@@email-field-title"
               required
               autofocus
               type="email"
               name="email">
      </div>

      <div class="row">
        <input pInputText
               [(ngModel)]="registration.name"
               title="Login"
               placeholder="Login"
               i18n-title="name field title@@name-field-title"
               i18n-placeholder="name  field title@@name-field-title"
               required
               name="name"
               type="text"
        >
      </div>

      <div class="row">
        <input pInputText
               [(ngModel)]="registration.password"
               title="Password"
               placeholder="Password"
               i18n-title="password field title@@password-field-title"
               i18n-placeholder="password field title@@password-field-title"
               required
               minlength="8"
               [ngClass]="{'password-mismatch': registerForm.errors?.validateFieldEquality}"
               name="password"
               type="password"
        >
      </div>


      <div class="row">
        <input pInputText
               [(ngModel)]="newAccountPasswordCheck"
               title="Password check"
               placeholder="Password check"
               i18n-title="password-check field title@@password-check-field-title"
               i18n-placeholder="password-check field title@@password-check-field-title"
               required
               minlength="8"
               [class.ng-]="{'password-mismatch': registerForm.errors?.validateFieldEquality}"
               name="passwordCheck"
               type="password"
        >
      </div>

    </section>


    <div class="row">
      <input pInputText
             [(ngModel)]="registration.user.firstName"
             title="First name"
             placeholder="First name"
             i18n-title="firtname field title@@name-field-title"
             i18n-placeholder="firtname field title@@name-field-title"
             required
             name="firstName"
             type="text"
      >
    </div>

    <div class="row">
      <input pInputText
             [(ngModel)]="registration.user.lastName"
             title="Last name"
             placeholder="Last name"
             i18n-title="lastname field title@@name-field-title"
             i18n-placeholder="lastname field title@@name-field-title"
             required
             name="lastName"
             type="text"
      >
    </div>

    <div class="actions">
      <button type="submit" hidden></button>
      <button pButton type="button"
              label="Create an account"
              i18n-label="register button label"
              [disabled]="registerForm.invalid"
              (click)="onRegister()"
      ></button>
    </div>

    <div class="actions">
      <a (click)="logout()">
        Back to login form
      </a>
    </div>
  </form>
</div>
